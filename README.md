JMeter Test Plan: Functional / Load testing for  message broker
======================================================
Technologies: JMeter 5.3, JBoss AMQ 7.5 
Summary:  JMS Publisher that sends a message to a broker. The content of the message source is from a file

System requirements
-------------------

1. Download and install JMeter's latest release. Will refer to the root of JMeter installation directory as $JMeter_HOME, by default, home directory is /apache-jmeter-5.3:

https://jmeter.apache.org/download_jmeter.cgi

2. Download and install JBoss AMQ 7.5 or latest. Will refer to the root AMQ directory as $AMQ_HOME. By default, home directory is /amq-broker-7.5.0

3. Go to $AMQ_HOME/lib/client and copy `artemis-jms-client-all-2.10.0.reedhat-00004.jar` to $JMeter_HOME/lib

4. Start AMQ Broker (Not covered in this README)

Execute Test Plan
-----------------------------------------------
Method 1: Recommended. Values are defined in a properties file. Update the values to match your environment. 

     $JMeter_HOME/bin/jmeter -n -t File-Submission-Publisher-Final.jmx -p jmeter.properties

Method 2: If properties file isn't available, each properties can be passed in via command line. 

     $JMeter_HOME/bin/jmeter -JnumOfUsers=1 -JbrokerUrl=tcp://localhost:61616 -JqueueName=TestJmeterQueue -JinputFile=/Users/nzhu/Dev/tools/apache-jmeter-5.3/test-plans/submission_payload.json -n -t File-Submission-Publisher-Final.jmx

File Submission Test Plan
------------------------------------------------
Below are steps for PAM submission, follow the steps below:
1) jmeter -n -t File-Submission-Publisher-Final.jmx -p step1-submission.properties
2) jmeter -n -t File-Submission-Publisher-Final.jmx -p step2-magic.properties
3) jmeter -n -t File-Submission-Publisher-Final.jmx -p step3-dynamic.properties
4) jmeter -n -t File-Submission-Publisher-Final.jmx -p step4-static.properties
  
Test Plan Details
-----------------------------------------------
Each properties are externalized so user can change the value to match his/her environment. In this test plan, jmeter.properties contains numOfUsers, queueName, brokerUrl and inputFile. Properties are referenced by JMeter using the notation ${__P(PROP_NAME,DEFAULT_VAULE)} 
**NOTE** There are two underscore in the notation.

Below is an explanation of each property.

numOfUsers: number of messages to be published. By default, the value is 1. For each one user, a single message is published tothe message broker. Increase this number to mimic additional load.

brokerUrl: message broker destination. By default, the value is tcp://localhost:61616

queueName: name of the message queue to sent to. By default, the value is JmeterDefaultTestQueue

inputFile: content which JMeter will extract from to publish to the message queue. MUST provide absolute path.
